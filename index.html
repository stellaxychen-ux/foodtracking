<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pâ€‘Care | Pancreatic Nutrition & Evidence Library</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --brand:#10b981; /* emerald */
      --brand2:#22c55e;
      --bg:#f6fbf8;
    }
    body{ background:var(--bg); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .card{ background:#fff; border-radius:18px; box-shadow:0 8px 24px rgba(16,185,129,.08); }
    .safe{ border-left:6px solid #10b981; background:linear-gradient(90deg, rgba(16,185,129,.08), rgba(255,255,255,0)); }
    .caution{ border-left:6px solid #f59e0b; background:linear-gradient(90deg, rgba(245,158,11,.10), rgba(255,255,255,0)); }
    .avoid{ border-left:6px solid #ef4444; background:linear-gradient(90deg, rgba(239,68,68,.10), rgba(255,255,255,0)); }
    .tab{ padding:10px 14px; border-radius:14px; font-weight:800; color:#0f172a; }
    .tab-active{ background:rgba(16,185,129,.15); color:#065f46; }
    .btn{ background:linear-gradient(135deg, var(--brand), var(--brand2)); color:#fff; border-radius:14px; padding:10px 12px; font-weight:900; box-shadow:0 10px 18px rgba(16,185,129,.18); }
    .btn-ghost{ border:1px solid rgba(15,23,42,.12); border-radius:14px; padding:10px 12px; font-weight:900; }
    .tiny{ font-size:12px; }
    .muted{ color:#64748b; }
    .pill{ font-size:11px; padding:2px 8px; border-radius:999px; background:rgba(16,185,129,.12); color:#065f46; font-weight:800; }
    .pill2{ font-size:11px; padding:2px 8px; border-radius:999px; background:rgba(59,130,246,.12); color:#1e3a8a; font-weight:800; }
    .chip{ font-size:12px; padding:4px 10px; border-radius:999px; background:rgba(15,23,42,.06); }
    .barbg{ width:100%; height:10px; border-radius:999px; background:rgba(15,23,42,.08); overflow:hidden; }
    .barfg{ height:10px; border-radius:999px; background:linear-gradient(90deg, #fb923c, #f97316); }
    .barfg2{ height:10px; border-radius:999px; background:linear-gradient(90deg, #10b981, #22c55e); }
    .weekrow{ display:flex; gap:10px; align-items:flex-start; padding:10px 0; border-bottom:1px solid rgba(15,23,42,.06); }
    #toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:18px; background:#0f172a; color:#fff; padding:10px 14px; border-radius:14px; box-shadow:0 12px 22px rgba(0,0,0,.20); transition:opacity .25s; }
  </style>
</head>
<body class="pb-24">
  <!-- Header -->
  <div class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-100">
    <div class="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between gap-3">
      <div>
        <div class="flex items-center gap-2">
          <div class="text-2xl">ğŸŸ¢</div>
          <h1 class="text-xl font-extrabold text-slate-900">Pâ€‘Care</h1>
        </div>
        <div class="tiny muted">Pancreatic nutrition + integrative evidence (ZH/EN) âœ¨</div>
      </div>
      <div class="flex items-center gap-2">
        <button id="langBtn" class="btn-ghost">ğŸŒ ä¸­/EN</button>
      </div>
    </div>

    <div class="max-w-5xl mx-auto px-4 pb-3 flex gap-2">
      <button class="tab tab-active" data-tab="home" onclick="PCare.switchTab('home')" data-i18n="home">Home</button>
      <button class="tab" data-tab="analysis" onclick="PCare.switchTab('analysis')" data-i18n="analysis">Analysis</button>
      <button class="tab" data-tab="evidence" onclick="PCare.switchTab('evidence')" data-i18n="evidence">Evidence</button>
      <button class="tab" data-tab="notes" onclick="PCare.switchTab('notes')" data-i18n="notes">Notes</button>
    </div>
  </div>

  <div class="max-w-5xl mx-auto px-4 pt-5 space-y-5">
    <!-- HOME -->
    <section id="tab-home">
      <div class="grid md:grid-cols-3 gap-4">
        <div class="card p-5 md:col-span-2">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-extrabold text-slate-900" data-i18n="daily_goals">Daily goals</h2>
            <button id="resetBtn" class="btn-ghost text-rose-600" data-i18n="reset">Reset today</button>
          </div>

          <!-- Bars -->
          <div class="mt-4 space-y-4">
            <div>
              <div class="flex justify-between tiny">
                <div class="muted">ğŸ”¥ <span data-i18n="calories">Calories</span></div>
                <div class="font-extrabold"><span id="calCur">0</span> / <span id="calTgt">0</span> <span class="muted">kcal</span> â€¢ <span id="calPct">0%</span></div>
              </div>
              <div class="barbg mt-2"><div id="calBar" class="barfg" style="width:0%"></div></div>
            </div>

            <div>
              <div class="flex justify-between tiny">
                <div class="muted">ğŸ¥© <span data-i18n="protein">Protein</span></div>
                <div class="font-extrabold"><span id="protCur">0</span> / <span id="protTgt">0</span> <span class="muted">g</span> â€¢ <span id="protPct">0%</span></div>
              </div>
              <div class="barbg mt-2"><div id="protBar" class="barfg2" style="width:0%"></div></div>
            </div>

            <div class="grid sm:grid-cols-2 gap-3">
              <div>
                <div class="flex justify-between tiny">
                  <div class="muted">ğŸ <span data-i18n="fv">Fruit & Veg</span></div>
                  <div class="font-extrabold"><span id="fvCur">0</span> / <span id="fvTgt">0</span> <span class="muted">g</span> â€¢ <span id="fvPct">0%</span></div>
                </div>
                <div class="barbg mt-2"><div id="fvBar" class="barfg2" style="width:0%"></div></div>
              </div>
              <div>
                <div class="flex justify-between tiny">
                  <div class="muted">ğŸ’§ <span data-i18n="water">Fluids</span></div>
                  <div class="font-extrabold"><span id="waterCur">0</span> / <span id="waterTgt">0</span> <span class="muted">ml</span> â€¢ <span id="waterPct">0%</span></div>
                </div>
                <div class="barbg mt-2"><div id="waterBar" class="barfg2" style="width:0%"></div></div>
              </div>
            </div>

            <div class="flex gap-2">
              <button id="askBtn" class="btn flex-1" data-i18n="ask_ai">Ask AI</button>
              <button id="googleBtn" class="btn-ghost flex-1" data-i18n="google">Search Google</button>
            </div>
          </div>
        </div>

        <div class="card p-5">
          <h3 class="text-lg font-extrabold">ğŸ§  Tips</h3>
          <div class="tiny muted mt-2">
            âœ… å°‘é‡å¤šé¤ â€¢ âœ… ä½è„‚æ›´å‹å¥½ â€¢ âœ… æ¯å£æ…¢ä¸€ç‚¹<br/>
            ğŸ¥© è›‹ç™½æ˜¯ä¼˜å…ˆé¡¹ï¼ˆæ¢å¤/è‚Œè‚‰/å…ç–«ï¼‰<br/>
            âš ï¸ è‹¥æŒç»­è…¹æ³»/ä½“é‡ä¸‹é™/é»„ç–¸ï¼Œè¯·å°½å¿«å°±åŒ»è¯„ä¼°
          </div>

          <div class="mt-4 card p-4 border border-slate-100 shadow-none">
            <div class="tiny font-extrabold" data-i18n="au_ref">Australia reference</div>
            <select id="auProfile" class="mt-2 w-full p-2 rounded-xl border border-slate-200">
              <option value="female">Adult Female</option>
              <option value="male">Adult Male</option>
            </select>
            <div id="auBox" class="tiny muted mt-2"></div>
          </div>
        </div>
      </div>

      <!-- Search -->
      <div class="card p-5">
        <div class="flex items-center justify-between gap-3">
          <h3 class="text-lg font-extrabold">ğŸ” Food Finder</h3>
          <div class="tiny muted">æ”¯æŒä¸­æ–‡åˆ«å / aliases âœ…</div>
        </div>
        <div class="relative mt-3">
          <input id="foodSearch" class="w-full p-4 rounded-2xl border border-slate-200 outline-none focus:ring-2 focus:ring-emerald-200" placeholder="Searchâ€¦" />
          <div class="absolute right-4 top-4">âœ¨</div>
        </div>
        <div id="foodList" class="mt-4 space-y-3"></div>
        <div id="notFound" class="hidden text-center p-8 muted">
          <div data-i18n="not_found">Not found in database.</div>
          <div class="mt-2"><button class="btn-ghost" onclick="PCare.askAI()">ğŸ¤– Ask AI</button></div>
        </div>
      </div>
    </section>

    <!-- ANALYSIS -->
    <section id="tab-analysis" class="hidden">
      <div class="card p-5">
        <div class="flex items-center justify-between">
          <h2 class="text-lg font-extrabold">ğŸ“ˆ <span data-i18n="analysis">Analysis</span></h2>
          <div class="tiny muted" data-i18n="week_view">Last 7 days</div>
        </div>
        <div id="weekWrap" class="mt-3"></div>
        <div class="tiny muted mt-3">æç¤ºï¼šè¿™é‡Œæ˜¯çƒ­é‡ä¸è›‹ç™½çš„è¶‹åŠ¿æ¡ï¼›ä¸‹ä¸€æ­¥ä½ å¦‚æœå¸Œæœ›åšâ€œé£Ÿç‰©ç»„ä»½é‡/å®é‡è¥å…»â€ä¹Ÿå¯ä»¥ç»§ç»­æ‰©å±•ã€‚</div>
      </div>
    </section>

    <!-- EVIDENCE -->
    <section id="tab-evidence" class="hidden">
      <div class="card p-5">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h2 class="text-lg font-extrabold">ğŸŒ¿ <span data-i18n="evidence_title">Integrative evidence</span></h2>
            <div id="evHint" class="tiny muted"></div>
          </div>
          <div class="tiny muted">Items: <span id="evCount">0</span></div>
        </div>

        <div class="grid md:grid-cols-2 gap-3 mt-4">
          <div>
            <div class="tiny font-extrabold" data-i18n="filter_type">Type</div>
            <select id="evType" class="mt-2 w-full p-3 rounded-2xl border border-slate-200">
              <option value="all">All</option>
              <option value="syndrome">syndrome</option>
              <option value="formula">formula</option>
              <option value="herb">herb</option>
              <option value="compound">compound</option>
              <option value="therapy">therapy</option>
            </select>
          </div>
          <div>
            <div class="tiny font-extrabold" data-i18n="filter_evidence">Evidence</div>
            <select id="evLevel" class="mt-2 w-full p-3 rounded-2xl border border-slate-200">
              <option value="all">All</option>
              <option value="moderate">moderate</option>
              <option value="low">low</option>
              <option value="very_low">very_low</option>
              <option value="experience">experience</option>
            </select>
          </div>
        </div>

        <div id="evList" class="mt-5 space-y-3"></div>
      </div>
    </section>

    <!-- NOTES -->
    <section id="tab-notes" class="hidden">
      <div class="card p-5 space-y-3">
        <h2 class="text-lg font-extrabold">ğŸ§¾ Notes</h2>
        <div class="tiny muted">
          1) è¿™æ˜¯é™æ€ç½‘é¡µï¼ˆGitHub Pages å‹å¥½ï¼‰ï¼Œæ•°æ®åº“æ¥è‡ªåŒç›®å½• JSONï¼ˆfooddb.json / tcm_evidence.json / aus_guidelines.jsonï¼‰ã€‚<br/>
          2) ä½ æƒ³â€œæ•°æ®åº“æ›´å¹¿æ›´å¤§â€æ—¶ï¼Œåªéœ€è¦æŒ‰ schema ç»§ç»­å¾€ JSON é‡Œè¿½åŠ æ¡ç›®ï¼›é¡µé¢ä¼šè‡ªåŠ¨æ”¯æŒæ£€ç´¢ä¸ç­›é€‰ã€‚<br/>
          3) Tailwind çš„ CDN æç¤ºæ˜¯ warningï¼Œä¸å½±å“åŠŸèƒ½ï¼›è‹¥è¦ä¼ä¸šçº§ç”Ÿäº§æ„å»ºå¯å†å‡çº§åˆ° Tailwind CLIã€‚<br/>
        </div>
      </div>
    </section>
  </div>

  <!-- Evidence Modal -->
  <div id="evModal" class="hidden fixed inset-0 bg-black/40 items-center justify-center z-50">
    <div class="bg-white w-11/12 max-w-2xl rounded-3xl p-5 card shadow-none">
      <div class="flex items-center justify-between gap-3">
        <div id="evModalTitle" class="text-lg font-extrabold"></div>
        <button id="evClose" class="btn-ghost">âœ–</button>
      </div>
      <div id="evModalBody" class="mt-3"></div>
    </div>
  </div>

  <div id="toast" class="hidden">OK</div>

  <script src="./app.js"></script>
</body>
</html>
